---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';

export interface Props {
  title: string;
  date: string; // ISO string
  stack: string[];
  screenshots?: Array<{
    image: ImageMetadata;
    caption?: string;
    alt?: string;
  }>;
}

const { title, date, stack, screenshots = [] } = Astro.props;
const dateObj = new Date(date);
const formatted = dateObj.toLocaleDateString('lt-LT');
---

<article class="project-block">
  <header>
    <h2>{title}</h2>
    <time datetime={date}>{formatted}</time>
  </header>

  {screenshots.length > 0 && (
    <div class="screens">
      {screenshots.map((screen) => (
        <figure class="screen">
          <Image src={screen.image} alt={screen.alt || ""} />
          {screen.caption && <figcaption>{screen.caption}</figcaption>}
        </figure>
      ))}
    </div>
  )}

  <ul class="stack">
    {stack.map((t) => (
      <li>{t}</li>
    ))}
  </ul>

  <div class="content">
    <slot />
  </div>
</article>