---
import type { ImageMetadata } from 'astro';

export interface Props {
  title: string;
  date: string; // ISO string
  stack: string[];
  screenshots?: ImageMetadata[];
}

const { title, date, stack, screenshots = [] } = Astro.props;
const dateObj = new Date(date);
const formatted = dateObj.toLocaleDateString('lt-LT');
---

<article class="project-block">
  <header>
    <h2>{title}</h2>
    <time datetime={date}>{formatted}</time>
  </header>

  {screenshots.length > 0 && (
    <figure class="screens">
      {screenshots.map((img) => (
        <img src={img.src} alt={`${title} screenshot`} loading="lazy" width={img.width} height={img.height} />
      ))}
    </figure>
  )}

  <ul class="stack">
    {stack.map((t) => (
      <li>{t}</li>
    ))}
  </ul>

  <div class="content">
    <slot />
  </div>
</article>